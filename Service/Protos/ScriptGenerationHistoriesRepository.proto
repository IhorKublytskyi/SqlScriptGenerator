syntax = "proto3";

import "google/protobuf/Empty.proto";
import "google/protobuf/Timestamp.proto";
import "Protos/ScriptFileBuilder.proto";

option csharp_namespace = "Service.GrpcAutoGenerated";

message ScriptGenerationHistoryResponse{
	int32 quantity = 1;
	DatabaseDialect dialect = 2;
	google.protobuf.Timestamp requested_at = 3;
}
message ScriptGenerationHistoriesResponse{
	repeated ScriptGenerationHistoryResponse histories = 1;
}

message AddScriptGenerationHistoryRequest{
	int32 quantity = 1;
	DatabaseDialect dialect = 2;
	google.protobuf.Timestamp requested_at = 3;
}

message ScriptGenerationHistoriesByDialectRequest{
	string dialectName = 1;
	PaginationParameters parameters = 2;
}

message ScriptGenerationHistoryByDialectResponse{
	int32 quantity = 1;
	google.protobuf.Timestamp requestedAt = 2;
}

message ScriptGenerationHistoriesByDialectResponse{
	repeated ScriptGenerationHistoryByDialectResponse histories = 1;
}
message HistoryQueryParameters{
	PaginationParameters paginationParameters = 1;
	int32 dialect = 2;
	google.protobuf.Timestamp dateTo = 3;
	google.protobuf.Timestamp dateFrom = 4;
}
message PaginationParameters{
	int32 pageNumber = 1;
	int32 pageSize = 2;
}

service ScriptGenerationHistoryRepository{
	rpc Get(HistoryQueryParameters) returns (ScriptGenerationHistoriesResponse);
	rpc Add(AddScriptGenerationHistoryRequest) returns (google.protobuf.Empty);
	rpc Delete(google.protobuf.Empty) returns (google.protobuf.Empty);
}
syntax = "proto3";

import "google/protobuf/timestamp.proto";
import "google/protobuf/empty.proto";
import "script_file_builder.proto";

option csharp_namespace = "GenerationService.GrpcAutogenerated";

message AddScriptGenerationHistoryRequest{
	int32 quantity = 1;
	DatabaseDialect dialect = 2;
	google.protobuf.Timestamp requested_at = 3;
}

message RemoveHistoryRequest{
	int32 id = 1;
}

message ScriptGenerationHistoryResponse{
	int32 id = 1;
	int32 quantity = 2;
	DatabaseDialect dialect = 3;
	google.protobuf.Timestamp requested_at = 4;
}

message ScriptGenerationHistoriesResponse{
	repeated ScriptGenerationHistoryResponse histories = 1;
	int32 totalCount = 2;
}

message HistoryQueryParameters{
	PaginationParameters paginationParameters = 1;
	FilterParameters filterParameters = 3;
	SortingParameters sortingParameters = 4;

}
message PaginationParameters{
	int32 pageNumber = 1;
	int32 pageSize = 2;
}

message FilterParameters{
	int32 dialect = 1;
	int32 minQuantity = 2;
	int32 maxQuantity = 3;
	google.protobuf.Timestamp dateFrom = 4;
	google.protobuf.Timestamp dateTo = 5;
	google.protobuf.Timestamp exactDate = 6;
}

message SortingParameters{
	bool descending = 1;
	string sortBy = 2;
}

service ScriptGenerationHistoriesServiceProto{
	rpc Get(HistoryQueryParameters) returns (ScriptGenerationHistoriesResponse);
	rpc Add(AddScriptGenerationHistoryRequest) returns (google.protobuf.Empty); 
	rpc Delete(google.protobuf.Empty) returns (google.protobuf.Empty);
	rpc Remove(RemoveHistoryRequest) returns (google.protobuf.Empty);
}